var PLAYERS=function(){var a={},b=[];_sidebarWidth=280,_topnavHeight=60,_map=$("#map"),map=new google.maps.Map(document.getElementById("map"),{zoom:15,scrollwheel:!1,center:new google.maps.LatLng(32.3189423,-64.8075121),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"landscape",stylers:[{hue:"#FFBB00"},{saturation:43.400000000000006},{lightness:37.599999999999994},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#FFC200"},{saturation:-61.8},{lightness:45.599999999999994},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:51.19999999999999},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:52},{gamma:1}]},{featureType:"water",stylers:[{hue:"#0078FF"},{saturation:-13.200000000000003},{lightness:2.4000000000000057},{gamma:1}]},{featureType:"poi",stylers:[{hue:"#00FF6A"},{saturation:-1.0989010989011234},{lightness:11.200000000000017},{gamma:1}]}]}),_filter=$("#search-form");var c=function(a){var c,d=new google.maps.LatLngBounds;if(a.length)for(c=0;c<a.length;c++){var e=document.createElement("img");e.src=a[c].photo;var f=document.createElement("div");infoboxOptions={content:f,disableAutoPan:!1,pixelOffset:new google.maps.Size(-100,0),zIndex:null,alignBottom:!0,boxClass:"infobox-wrapper",enableEventPropagation:!0,closeBoxMargin:"0px 0px -8px 0px",closeBoxURL:"/res/assets/img/close-btn.png",infoBoxClearance:new google.maps.Size(1,1)};var g=new MarkerWithLabel({title:a[c].name,name:a[c].name,position:new google.maps.LatLng(a[c].latitude,a[c].longitude),map:map,icon:"/assets/img/marker.png",labelAnchor:new google.maps.Point(50,0),labelClass:"marker-style"});d.extend(g.getPosition()),b.push(g),f.innerHTML='<div class="infobox-inner"><a href="#"><div class="infobox-image" style="position: relative"><img src="https://i.stack.imgur.com/MiZJu.jpg?s=32&amp;g=1" alt="Avatar"></div></a><div class="infobox-description"><div class="infobox-title"><a href="">'+a[c].username+'</a></div><div class="infobox-location">'+a[c].city+"</div></div></div>",b[c].infobox=new InfoBox(infoboxOptions),google.maps.event.addListener(g,"mouseover",function(a,c){return function(){for(h=0;h<b.length;h++)b[h].infobox.close();b[c].infobox.open(map,this)}}(0,c)),google.maps.event.addListener(g,"mouseleave",function(a,c){return function(){b[c].infobox.open(map,this)}}(0,c)),google.maps.event.addListener(map,"click",function(a){for(var c=0;c<b.length;c++)b[c].infobox.close()})}var i=[{url:"assets/img/cluster.png",height:37,width:37}];new MarkerClusterer(map,b,{styles:i,maxZoom:15});$("body").addClass("loaded"),setTimeout(function(){$("body").removeClass("has-fullscreen-map")},1e3),$("#map").removeClass("fade-map"),google.maps.event.addListener(map,"idle",function(){for(var c=0;c<a.length;c++)map.getBounds().contains(b[c].getPosition())}),map.fitBounds(d)};return _resizeMap={init:function(){var b=$(window).width()-_sidebarWidth,d=$(window).height()-_topnavHeight;_map.width(b).height(d),c(a)}},_clearMarkers={clear:function(){for(var a=0;a<b.length;a++)b[a].setMap(null)},init:function(){$.when(_clearMarkers.clear()).done(function(){return a={},b.length=0,!0})}},_fetch=function(){var b=_filter.serializeArray();b.push({name:"fetch",value:1}),$.ajax({type:"POST",dataType:"json",data:b,url:location.href,beforeSend:function(){return _clearMarkers.init()},success:function(b){a=b,c(b)}})},_formFilter=function(){_filter.find("select").each(function(a){$(this).on("change",function(){_fetch()})})},{init:function(){$(window).resize(function(){clearTimeout(a);var a=setTimeout(_resizeMap.init(),100)}),_resizeMap.init(),_fetch(),_formFilter()}(),data:a,addmarkers:_clearMarkers.init()}}();